---
kind: pipeline
name: test

steps:
  - name: test
    image: alpine:3.12
    pull: always
    environment:
      CARGO_HOME: target/cargo
      RUST_BACKTRACE: 1
      RUST_LOG: debug
    commands:
      - apk add --no-cache cargo git
      - git log -n1
      - cargo -V
      - cargo test

---
kind: pipeline
name: rustfmt

steps:
  - name: rustfmt
    image: iamsauravsharma/rust-fmt:nightly-alpine
    pull: always
    commands:
      - cargo fmt -- -V
      - cargo fmt -- --check -l

---
kind: signature
hmac: ea8579dc903633ff16a4a2afbd26baf593a25359dff47c336a1993fd9e28f182

...
